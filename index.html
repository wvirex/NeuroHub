<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NeuroHub - AI Platform</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Inter', sans-serif;
            box-sizing: border-box;
        }
        
        :root {
            --bg-primary: #09090d;
            --bg-secondary: #12121a;
            --bg-card: #1a1a2e;
            --bg-input: #16161f;
            --purple-soft: #8b5cf6;
            --purple-glow: #a78bfa;
            --purple-dark: #5b21b6;
            --text-primary: #e2e8f0;
            --text-secondary: #94a3b8;
        }
        
        body {
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            min-height: 100dvh;
            overflow: hidden;
            -webkit-overflow-scrolling: touch;
        }
        
        /* –ß–∞—Å—Ç–∏—Ü—ã - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ, –Ω–µ —Å–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è */
        .particles-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 0;
        }
        
        .particle {
            position: absolute;
            border-radius: 50%;
            background: rgba(139, 92, 246, 0.6);
            box-shadow: 0 0 10px rgba(139, 92, 246, 0.5);
            animation: float-particle linear infinite;
        }
        
        @keyframes float-particle {
            0% {
                transform: translateY(0) translateX(0) scale(1);
                opacity: 0;
            }
            5% {
                opacity: 0.8;
            }
            50% {
                transform: translateY(-50vh) translateX(20px) scale(0.8);
                opacity: 0.6;
            }
            95% {
                opacity: 0.3;
            }
            100% {
                transform: translateY(-100vh) translateX(-20px) scale(0.5);
                opacity: 0;
            }
        }
        
        /* –ö—É—Ä—Å–æ—Ä –ø–µ—á–∞—Ç–∞–Ω–∏—è */
        .typing-cursor {
            display: inline-block;
            width: 3px;
            height: 1em;
            background: var(--purple-soft);
            margin-left: 4px;
            animation: blink-cursor 0.8s infinite;
            vertical-align: middle;
        }
        
        @keyframes blink-cursor {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        /* –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ç–µ–∫—Å—Ç */
        .animated-gradient {
            background: linear-gradient(90deg, #8b5cf6, #a78bfa, #c4b5fd, #a78bfa, #8b5cf6);
            background-size: 200% auto;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient-shift 3s linear infinite;
        }
        
        @keyframes gradient-shift {
            0% { background-position: 0% center; }
            100% { background-position: 200% center; }
        }
        
        /* –ü—É–ª—å—Å–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ */
        .send-btn:not(:disabled) {
            animation: pulse-glow 2s infinite;
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(139, 92, 246, 0.4); }
            50% { box-shadow: 0 0 35px rgba(139, 92, 246, 0.7); }
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –∏–∫–æ–Ω–æ–∫ */
        .mode-btn svg {
            transition: all 0.3s ease;
        }
        
        .mode-btn:hover svg {
            transform: scale(1.2) rotate(5deg);
        }
        
        .mode-btn.active svg {
            animation: icon-bounce 0.5s ease;
        }
        
        @keyframes icon-bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }
        
        /* Hover –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–æ–∫ */
        .suggestion-chip {
            position: relative;
            overflow: hidden;
        }
        
        .suggestion-chip::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(139, 92, 246, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .suggestion-chip:hover::before {
            width: 300px;
            height: 300px;
        }
        
        .suggestion-chip span {
            position: relative;
            z-index: 1;
        }
        
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            height: 100dvh;
        }
        
        .mode-btn {
            background: var(--bg-secondary);
            border: 1px solid rgba(139, 92, 246, 0.15);
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        
        .mode-btn:hover {
            border-color: rgba(139, 92, 246, 0.4);
            background: rgba(139, 92, 246, 0.1);
        }
        
        .mode-btn.active {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(91, 33, 182, 0.3) 100%);
            border-color: var(--purple-soft);
            color: var(--purple-glow);
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.2);
        }
        
        .input-container {
            background: var(--bg-secondary);
            border: 1px solid rgba(139, 92, 246, 0.2);
            transition: all 0.3s ease;
        }
        
        .input-container:focus-within {
            border-color: var(--purple-soft);
            box-shadow: 0 0 30px rgba(139, 92, 246, 0.15);
        }
        
        .main-input {
            background: transparent;
            color: var(--text-primary);
            font-size: 16px; /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑—É–º –Ω–∞ iOS */
        }
        
        .main-input:focus {
            outline: none;
        }
        
        .main-input::placeholder {
            color: var(--text-secondary);
        }
        
        .send-btn {
            background: linear-gradient(135deg, var(--purple-soft) 0%, var(--purple-dark) 100%);
            transition: all 0.3s ease;
        }
        
        .send-btn:hover:not(:disabled) {
            box-shadow: 0 0 25px rgba(139, 92, 246, 0.5);
            transform: scale(1.05);
        }
        
        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
            animation: none;
        }
        
        /* –û–Ω–±–æ—Ä–¥–∏–Ω–≥ */
        .onboarding-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.85);
            z-index: 49;
            transition: opacity 0.3s ease;
        }
        
        .tooltip-box {
            background: linear-gradient(135deg, #1e1b4b 0%, #0f0f1a 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            box-shadow: 0 0 40px rgba(139, 92, 246, 0.2);
            pointer-events: auto;
            z-index: 1002;
            max-width: calc(100vw - 40px);
        }
        
        .pulse-ring {
            animation: pulse-ring 2s ease-out infinite;
        }
        
        @keyframes pulse-ring {
            0% { transform: scale(0.8); opacity: 1; }
            100% { transform: scale(1.5); opacity: 0; }
        }
        
        .highlight-element {
            position: relative;
            z-index: 51 !important;
            box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.6), 0 0 40px rgba(139, 92, 246, 0.4);
            border-radius: 12px;
            background: var(--bg-card) !important;
        }
        
        /* Dropdown */
        .model-dropdown-btn {
            background: var(--bg-card);
            border: 1px solid rgba(139, 92, 246, 0.2);
            transition: all 0.3s ease;
        }
        
        .model-dropdown-btn:hover {
            border-color: rgba(139, 92, 246, 0.5);
            background: rgba(139, 92, 246, 0.1);
        }
        
        .model-dropdown-btn.active {
            border-color: var(--purple-soft);
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.2);
        }
        
        .dropdown-menu {
            position: absolute;
            top: calc(100% + 8px);
            min-width: 200px;
            max-width: calc(100vw - 32px);
            max-height: 60vh;
            overflow-y: auto;
            background: var(--bg-secondary);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 16px;
            padding: 8px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 100;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5), 0 0 30px rgba(139, 92, 246, 0.1);
            -webkit-overflow-scrolling: touch;
        }
        
        .dropdown-menu.center {
            left: 50%;
            transform: translateX(-50%) translateY(-10px);
        }
        
        .dropdown-menu.center.open {
            transform: translateX(-50%) translateY(0);
        }
        
        .dropdown-menu.right {
            right: 0;
            transform: translateY(-10px);
        }
        
        .dropdown-menu.right.open {
            transform: translateY(0);
        }
        
        .dropdown-menu.open {
            opacity: 1;
            visibility: visible;
        }
        
        .model-item, .lang-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 12px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .model-item:hover, .lang-item:hover {
            background: rgba(139, 92, 246, 0.1);
        }
        
        .model-item.selected, .lang-item.selected {
            background: rgba(139, 92, 246, 0.15);
            border: 1px solid rgba(139, 92, 246, 0.3);
        }
        
        .model-item-icon {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            background: var(--bg-card);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .model-item-info {
            flex: 1;
            min-width: 0;
        }
        
        .model-item-name {
            font-weight: 500;
            font-size: 14px;
            color: var(--text-primary);
        }
        
        .model-item-desc {
            font-size: 12px;
            color: var(--text-secondary);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .add-api-item {
            border: 1px dashed rgba(139, 92, 246, 0.3);
            background: rgba(139, 92, 246, 0.05);
        }
        
        .add-api-item:hover {
            border-color: var(--purple-soft);
            background: rgba(139, 92, 246, 0.15);
        }
        
        .custom-model-item {
            border: 1px solid rgba(34, 197, 94, 0.3);
        }
        
        .custom-model-item:hover {
            border-color: rgba(34, 197, 94, 0.5);
        }
        
        /* Language */
        .lang-btn {
            background: var(--bg-card);
            border: 1px solid rgba(139, 92, 246, 0.2);
            transition: all 0.3s ease;
        }
        
        .lang-btn:hover {
            border-color: rgba(139, 92, 246, 0.5);
            background: rgba(139, 92, 246, 0.1);
        }
        
        .lang-flag {
            font-size: 18px;
            line-height: 1;
        }
        
        /* Modal */
        .modal-overlay {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(4px);
        }
        
        .modal-box {
            background: var(--bg-secondary);
            border: 1px solid rgba(139, 92, 246, 0.3);
            box-shadow: 0 0 60px rgba(139, 92, 246, 0.2);
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-input {
            background: var(--bg-card);
            border: 1px solid rgba(139, 92, 246, 0.2);
            color: var(--text-primary);
            transition: all 0.3s ease;
            font-size: 16px;
        }
        
        .modal-input:focus {
            outline: none;
            border-color: var(--purple-soft);
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.2);
        }
        
        .modal-input::placeholder {
            color: var(--text-secondary);
        }
        
        /* Chat */
        .chat-area {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
            -webkit-overflow-scrolling: touch;
        }
        
        .chat-messages {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .message {
            display: flex;
            gap: 10px;
            margin-bottom: 16px;
            animation: messageIn 0.3s ease;
        }
        
        @keyframes messageIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .message-user .message-avatar {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        }
        
        .message-ai .message-avatar {
            background: linear-gradient(135deg, var(--purple-soft) 0%, var(--purple-dark) 100%);
        }
        
        .message-content {
            flex: 1;
            padding: 10px 14px;
            border-radius: 12px;
            max-width: 85%;
            min-width: 0;
        }
        
        .message-user .message-content {
            background: rgba(59, 130, 246, 0.15);
            border: 1px solid rgba(59, 130, 246, 0.2);
            margin-left: auto;
        }
        
        .message-ai .message-content {
            background: var(--bg-card);
            border: 1px solid rgba(139, 92, 246, 0.2);
        }
        
        .message-text {
            color: var(--text-primary);
            line-height: 1.6;
            white-space: pre-wrap;
            word-break: break-word;
        }
        
        .message-meta {
            font-size: 11px;
            color: var(--text-secondary);
            margin-top: 6px;
        }
        
        /* Loading */
        .loading-indicator {
            display: flex;
            flex-direction: column;
            gap: 8px;
            padding: 12px 16px;
            background: var(--bg-card);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 12px;
            max-width: fit-content;
        }
        
        .loading-dots {
            display: flex;
            gap: 4px;
            align-items: center;
        }
        
        .loading-dot {
            width: 8px;
            height: 8px;
            background: var(--purple-soft);
            border-radius: 50%;
            animation: loadingBounce 1.4s infinite ease-in-out;
        }
        
        .loading-dot:nth-child(1) { animation-delay: -0.32s; }
        .loading-dot:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes loadingBounce {
            0%, 80%, 100% {
                transform: scale(0.6);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        /* Progress bar */
        .progress-bar {
            width: 150px;
            height: 4px;
            background: rgba(139, 92, 246, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--purple-soft), var(--purple-glow));
            border-radius: 2px;
            animation: progressPulse 2s ease-in-out infinite;
            width: 30%;
        }
        
        @keyframes progressPulse {
            0% { width: 20%; margin-left: 0; }
            50% { width: 40%; margin-left: 30%; }
            100% { width: 20%; margin-left: 80%; }
        }
        
        /* Welcome screen */
        .welcome-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex: 1;
            padding: 20px;
        }
        
        .modes-center {
            display: flex;
            justify-content: center;
            gap: 6px;
            flex-wrap: wrap;
        }
        
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--purple-dark);
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--purple-soft);
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .logo-glow {
            text-shadow: 0 0 20px rgba(139, 92, 246, 0.5);
        }
        
        .suggestion-chip {
            background: var(--bg-card);
            border: 1px solid rgba(139, 92, 246, 0.15);
            transition: all 0.3s ease;
        }
        
        .suggestion-chip:hover {
            border-color: rgba(139, 92, 246, 0.5);
            background: rgba(139, 92, 246, 0.1);
            transform: translateY(-2px);
        }
        
        /* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è */
        @media (max-width: 640px) {
            .mode-btn {
                padding: 8px 12px;
            }
            
            .mode-btn span {
                display: none;
            }
            
            .welcome-screen h1 {
                font-size: 1.5rem !important;
            }
            
            .suggestion-chip {
                font-size: 12px;
                padding: 8px 12px;
            }
            
            .chat-area {
                padding: 12px;
            }
            
            .message-content {
                max-width: 90%;
            }
            
            .model-dropdown-btn {
                padding: 8px 12px;
            }
            
            .model-dropdown-btn .hidden-mobile {
                display: none;
            }
            
            #input-section {
                padding: 12px;
            }
            
            .dropdown-menu {
                left: 16px !important;
                right: 16px !important;
                transform: translateY(-10px) !important;
                min-width: auto !important;
            }
            
            .dropdown-menu.open {
                transform: translateY(0) !important;
            }
        }
        
        @media (max-width: 400px) {
            .mode-btn {
                padding: 8px 10px;
            }
            
            .modes-center {
                gap: 4px;
            }
        }
        
        /* Safe area –¥–ª—è iPhone */
        @supports (padding-bottom: env(safe-area-inset-bottom)) {
            #input-section {
                padding-bottom: calc(16px + env(safe-area-inset-bottom));
            }
        }
    </style>
</head>
<body>
    <!-- –û–Ω–±–æ—Ä–¥–∏–Ω–≥ backdrop -->
    <div id="onboarding-backdrop" class="onboarding-backdrop hidden"></div>
    
    <!-- –û–Ω–±–æ—Ä–¥–∏–Ω–≥ overlay -->
    <div id="onboarding-overlay" class="fixed inset-0 z-50 hidden pointer-events-none">
        <div id="tooltip" class="tooltip-box absolute p-5 rounded-2xl max-w-sm transition-all duration-500 pointer-events-auto">
            <div class="flex items-start gap-3">
                <div class="w-10 h-10 rounded-full bg-purple-500/20 flex items-center justify-center flex-shrink-0">
                    <span id="step-number" class="text-purple-400 font-bold">1</span>
                </div>
                <div class="min-w-0">
                    <h3 id="tooltip-title" class="text-lg font-semibold text-purple-300 mb-2"></h3>
                    <p id="tooltip-text" class="text-slate-400 text-sm leading-relaxed"></p>
                </div>
            </div>
            
            <div id="tooltip-arrow" class="absolute w-4 h-4 bg-purple-900/50 rotate-45"></div>
            
            <div class="flex items-center justify-between mt-5 pt-4 border-t border-purple-500/20 gap-4">
                <div class="flex gap-1">
                    <span id="dots-container"></span>
                </div>
                <div class="flex gap-2">
                    <button id="skip-btn" class="px-3 py-2 text-sm text-slate-400 hover:text-purple-400 transition-colors" data-i18n="skip">
                        Skip
                    </button>
                    <button id="next-btn" class="send-btn px-4 py-2 rounded-lg text-sm font-medium text-white" data-i18n="next">
                        Next
                    </button>
                </div>
            </div>
        </div>
        
        <div id="pulse-indicator" class="absolute pointer-events-none hidden z-50">
            <div class="w-12 h-12 rounded-full border-2 border-purple-500 pulse-ring"></div>
            <div class="w-12 h-12 rounded-full border-2 border-purple-500 pulse-ring" style="animation-delay: 0.5s;"></div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ API -->
    <div id="api-modal" class="modal-overlay fixed inset-0 z-50 hidden flex items-center justify-center p-4">
        <div class="modal-box rounded-2xl p-5 max-w-md w-full">
            <div class="flex items-center justify-between mb-5">
                <h2 class="text-lg font-bold text-purple-300" data-i18n="addApiTitle">Add Custom API</h2>
                <button id="close-modal" class="p-2 rounded-lg hover:bg-purple-500/10 transition-colors text-slate-400 hover:text-purple-400">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm text-slate-400 mb-2" data-i18n="apiName">Model Name</label>
                    <input type="text" id="api-name" class="modal-input w-full px-4 py-3 rounded-xl" placeholder="DeepSeek, GPT-4, etc.">
                </div>
                
                <div>
                    <label class="block text-sm text-slate-400 mb-2" data-i18n="apiEndpoint">API Endpoint</label>
                    <input type="text" id="api-endpoint" class="modal-input w-full px-4 py-3 rounded-xl" placeholder="https://api.deepseek.com/v1/chat/completions">
                </div>
                
                <div>
                    <label class="block text-sm text-slate-400 mb-2" data-i18n="apiKey">API Key</label>
                    <input type="password" id="api-key" class="modal-input w-full px-4 py-3 rounded-xl" placeholder="sk-...">
                </div>
                
                <div>
                    <label class="block text-sm text-slate-400 mb-2">Model ID</label>
                    <input type="text" id="api-model" class="modal-input w-full px-4 py-3 rounded-xl" placeholder="deepseek-chat, gpt-4, etc.">
                </div>
                
                <div>
                    <label class="block text-sm text-slate-400 mb-2" data-i18n="apiType">Type</label>
                    <select id="api-type" class="modal-input w-full px-4 py-3 rounded-xl">
                        <option value="text">Text</option>
                        <option value="image">Image</option>
                        <option value="video">Video</option>
                    </select>
                </div>
            </div>
            
            <div class="flex gap-3 mt-5">
                <button id="cancel-api" class="flex-1 px-4 py-3 rounded-xl border border-purple-500/30 text-slate-400 hover:bg-purple-500/10 transition-colors" data-i18n="cancel">
                    Cancel
                </button>
                <button id="save-api" class="flex-1 send-btn px-4 py-3 rounded-xl text-white font-medium" data-i18n="save">
                    Save
                </button>
            </div>
        </div>
    </div>

    <!-- –ß–∞—Å—Ç–∏—Ü—ã -->
    <div class="particles-bg" id="particles"></div>
    
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <div class="app-container" style="position: relative; z-index: 1;">
        <!-- –•–µ–¥–µ—Ä -->
        <header class="flex items-center justify-between px-3 md:px-6 py-3 border-b border-purple-500/10">
            <!-- –õ–æ–≥–æ -->
            <div id="logo" class="flex items-center gap-2 flex-shrink-0">
                <div class="w-8 h-8 rounded-xl bg-gradient-to-br from-purple-500 to-purple-700 flex items-center justify-center">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                    </svg>
                </div>
                <span class="text-base font-bold logo-glow text-purple-300 hidden sm:block">NeuroHub</span>
            </div>
            
            <!-- –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ -->
            <div id="neuro-selector" class="model-dropdown relative">
                <button id="model-dropdown-btn" class="model-dropdown-btn px-3 py-2 rounded-xl flex items-center gap-2">
                    <div class="w-6 h-6 rounded-lg bg-purple-500/20 flex items-center justify-center">
                        <svg class="w-4 h-4 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                    </div>
                    <span id="selected-model-name" class="text-sm font-medium text-slate-200" data-i18n="auto">Auto</span>
                    <svg class="w-4 h-4 text-slate-400 transition-transform duration-300" id="dropdown-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                    </svg>
                </button>
                
                <div id="model-dropdown-menu" class="dropdown-menu center" style="min-width: 280px;">
                    <div class="model-item selected" data-model="auto">
                        <div class="model-item-icon">
                            <svg class="w-5 h-5 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                            </svg>
                        </div>
                        <div class="model-item-info">
                            <div class="model-item-name" data-i18n="auto">Auto</div>
                            <div class="model-item-desc" data-i18n="bestModel">Best model for the task</div>
                        </div>
                    </div>
                    
                    <!-- –ë–∞–∑–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                    <div id="builtin-models-list"></div>
                    
                    <!-- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –º–æ–¥–µ–ª–∏ -->
                    <div id="custom-models-list"></div>
                    
                    <div class="model-item add-api-item mt-2" id="add-api-btn">
                        <div class="model-item-icon">
                            <svg class="w-5 h-5 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                            </svg>
                        </div>
                        <div class="model-item-info">
                            <div class="model-item-name" data-i18n="addApi">Add Custom API</div>
                            <div class="model-item-desc" data-i18n="addApiDesc">Connect your own model</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å -->
            <div class="flex items-center gap-1 flex-shrink-0">
                <!-- –Ø–∑—ã–∫ -->
                <div class="model-dropdown relative">
                    <button id="lang-dropdown-btn" class="lang-btn px-2 py-2 rounded-xl flex items-center gap-1">
                        <span id="current-lang-flag" class="lang-flag">üá∫üá∏</span>
                        <svg class="w-3 h-3 text-slate-400 transition-transform duration-300 hidden sm:block" id="lang-dropdown-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </button>
                    
                    <div id="lang-dropdown-menu" class="dropdown-menu right" style="min-width: 140px;">
                        <div class="lang-item" data-lang="ru">
                            <span class="lang-flag">üá∑üá∫</span>
                            <span class="text-sm text-slate-200">–†—É—Å—Å–∫–∏–π</span>
                        </div>
                        <div class="lang-item selected" data-lang="en">
                            <span class="lang-flag">üá∫üá∏</span>
                            <span class="text-sm text-slate-200">English</span>
                        </div>
                        <div class="lang-item" data-lang="de">
                            <span class="lang-flag">üá©üá™</span>
                            <span class="text-sm text-slate-200">Deutsch</span>
                        </div>
                        <div class="lang-item" data-lang="es">
                            <span class="lang-flag">üá™üá∏</span>
                            <span class="text-sm text-slate-200">Espa√±ol</span>
                        </div>
                        <div class="lang-item" data-lang="zh">
                            <span class="lang-flag">üá®üá≥</span>
                            <span class="text-sm text-slate-200">‰∏≠Êñá</span>
                        </div>
                        <div class="lang-item" data-lang="ja">
                            <span class="lang-flag">üáØüáµ</span>
                            <span class="text-sm text-slate-200">Êó•Êú¨Ë™û</span>
                        </div>
                    </div>
                </div>
                
                <!-- –ü–æ–º–æ—â—å -->
                <button id="help-btn" class="p-2 rounded-xl hover:bg-purple-500/10 transition-colors text-slate-400 hover:text-purple-400" title="Help">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å -->
        <div id="main-area" class="chat-area">
            <!-- Welcome Screen -->
            <div id="welcome-screen" class="welcome-screen">
                <div class="text-center mb-6 fade-in">
                    <h1 class="text-2xl md:text-4xl font-bold mb-3">
                        <span id="typing-text" class="text-slate-100"></span>
                        <span class="typing-cursor"></span>
                    </h1>
                    <p class="text-slate-500 text-sm md:text-base" data-i18n="welcomeSubtitle">Choose a mode and describe your idea</p>
                </div>
                
                <div id="suggestions" class="flex flex-wrap justify-center gap-2 mb-4 fade-in px-2">
                    <button class="suggestion-chip px-3 py-2 rounded-full text-sm text-slate-400" data-i18n="suggestion1">
                        üé® Draw a space landscape
                    </button>
                    <button class="suggestion-chip px-3 py-2 rounded-full text-sm text-slate-400" data-i18n="suggestion2">
                        ‚úçÔ∏è Write a poem
                    </button>
                    <button class="suggestion-chip px-3 py-2 rounded-full text-sm text-slate-400" data-i18n="suggestion3">
                        üé¨ Create an animation
                    </button>
                </div>
            </div>
            
            <!-- Chat Messages -->
            <div id="chat-messages" class="chat-messages hidden"></div>
        </div>

        <!-- –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å -->
        <div id="input-section" class="p-3 md:p-4 border-t border-purple-500/10 bg-[#09090d]">
            <div class="max-w-3xl mx-auto">
                <!-- –†–µ–∂–∏–º—ã -->
                <div id="mode-switcher" class="modes-center mb-3">
                    <button class="mode-btn active px-3 py-2 rounded-xl flex items-center gap-2 text-sm" data-mode="image">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                        <span data-i18n="image">Image</span>
                    </button>
                    <button class="mode-btn px-3 py-2 rounded-xl flex items-center gap-2 text-sm" data-mode="text">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        <span data-i18n="text">Text</span>
                    </button>
                    <button class="mode-btn px-3 py-2 rounded-xl flex items-center gap-2 text-sm" data-mode="video">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                        </svg>
                        <span data-i18n="video">Video</span>
                    </button>
                    <button class="mode-btn px-3 py-2 rounded-xl flex items-center gap-2 text-sm" data-mode="mix">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"/>
                        </svg>
                        <span data-i18n="mix">Mix</span>
                    </button>
                </div>
                
                <!-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ -->
                <div class="input-container flex items-end gap-2 p-2 md:p-3 rounded-2xl">
                    <div class="flex-1 min-w-0">
                        <textarea 
                            id="main-input"
                            class="main-input w-full resize-none text-base leading-relaxed"
                            data-i18n-placeholder="inputPlaceholder"
                            placeholder="Describe what you want to create..."
                            rows="1"
                            style="max-height: 100px;"
                        ></textarea>
                    </div>
                    
                    <div class="flex items-center gap-1 flex-shrink-0">
                        <button class="p-2 rounded-lg hover:bg-purple-500/10 transition-colors text-slate-500 hover:text-purple-400" title="Attach file">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"/>
                            </svg>
                        </button>
                        
                        <button id="send-btn" class="send-btn p-2.5 rounded-xl text-white" disabled>
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <p class="text-center text-xs text-slate-600 mt-2" data-i18n="disclaimer">
                    AI can make mistakes. Please verify important information.
                </p>
            </div>
        </div>
    </div>

    <script>
        // ==========================================
        // –ë–ê–ó–û–í–´–ï –ù–ï–ô–†–û–°–ï–¢–ò (–¥–æ–±–∞–≤–ª—è–π —Å—é–¥–∞!)
        // ==========================================
        const builtinModels = [
            // –ü–†–ò–ú–ï–†: –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –±–∞–∑–æ–≤—É—é –Ω–µ–π—Ä–æ—Å–µ—Ç—å
            // {
            //     id: 'deepseek',           // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
            //     name: 'DeepSeek',         // –ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
            //     icon: 'ü§ñ',               // –ò–∫–æ–Ω–∫–∞
            //     type: 'text',             // –¢–∏–ø: text, image, video
            //     description: 'Fast and smart',  // –û–ø–∏—Å–∞–Ω–∏–µ
            //     endpoint: 'https://api.deepseek.com/v1/chat/completions',
            //     apiKey: 'sk-YOUR-API-KEY-HERE',  // ‚Üê –í–°–¢–ê–í–¨ –°–í–û–ô –ö–õ–Æ–ß
            //     model: 'deepseek-chat',   // ID –º–æ–¥–µ–ª–∏ –¥–ª—è API
            //     enabled: true             // true = –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å, false = —Å–∫—Ä—ã—Ç—å
            // },
        ];
        
        // ==========================================
        // –õ–û–ö–ê–õ–ò–ó–ê–¶–ò–Ø
        // ==========================================
        const translations = {
            ru: {
                auto: '–ê–≤—Ç–æ',
                skip: '–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å',
                next: '–î–∞–ª–µ–µ',
                start: '–ù–∞—á–∞—Ç—å',
                welcomeTitle1: '–ß—Ç–æ —Ö–æ—Ç–∏—Ç–µ',
                welcomeTitle2: ' —Å–æ–∑–¥–∞—Ç—å?',
                welcomeSubtitle: '–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –∏ –æ–ø–∏—à–∏—Ç–µ –≤–∞—à—É –∏–¥–µ—é',
                image: '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ',
                text: '–¢–µ–∫—Å—Ç',
                video: '–í–∏–¥–µ–æ',
                mix: '–ú–∏–∫—Å',
                bestModel: '–õ—É—á—à–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –∑–∞–¥–∞—á–∏',
                addApi: '–î–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π API',
                addApiDesc: '–ü–æ–¥–∫–ª—é—á–∏—Ç—å —Å–≤–æ—é –º–æ–¥–µ–ª—å',
                suggestion1: 'üé® –ù–∞—Ä–∏—Å—É–π –∫–æ—Å–º–∏—á–µ—Å–∫–∏–π –ø–µ–π–∑–∞–∂',
                suggestion2: '‚úçÔ∏è –ù–∞–ø–∏—à–∏ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ',
                suggestion3: 'üé¨ –°–æ–∑–¥–∞–π –∞–Ω–∏–º–∞—Ü–∏—é',
                inputPlaceholder: '–û–ø–∏—à–∏—Ç–µ, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å...',
                imagePlaceholder: '–û–ø–∏—à–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ...',
                textPlaceholder: '–ß—Ç–æ –≤–∞–º –Ω–∞–ø–∏—Å–∞—Ç—å?',
                videoPlaceholder: '–û–ø–∏—à–∏—Ç–µ –≤–∏–¥–µ–æ...',
                mixPlaceholder: '–°–ø—Ä–æ—Å–∏—Ç–µ —á—Ç–æ —É–≥–æ–¥–Ω–æ (–ø–æ–º–Ω—é –∫–æ–Ω—Ç–µ–∫—Å—Ç)...',
                disclaimer: '–ù–µ–π—Ä–æ—Å–µ—Ç–∏ –º–æ–≥—É—Ç –æ—à–∏–±–∞—Ç—å—Å—è. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.',
                addApiTitle: '–î–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π API',
                apiName: '–ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏',
                apiEndpoint: 'API Endpoint',
                apiKey: 'API –ö–ª—é—á',
                apiType: '–¢–∏–ø',
                cancel: '–û—Ç–º–µ–Ω–∞',
                save: '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å',
                generating: '–ì–µ–Ω–µ—Ä–∏—Ä—É—é...',
                you: '–í—ã',
                onboarding: [
                    { title: '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!', text: '–≠—Ç–æ NeuroHub ‚Äî –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–µ–π—Ä–æ—Å–µ—Ç—è–º–∏. –î–∞–≤–∞–π—Ç–µ –ø–æ–∫–∞–∂—É –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.' },
                    { title: '–í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏', text: '–ó–¥–µ—Å—å –≤—ã–±–∏—Ä–∞–µ—Ç–µ –Ω–µ–π—Ä–æ—Å–µ—Ç—å. "–ê–≤—Ç–æ" ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π API.' },
                    { title: '–†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã', text: 'üñºÔ∏è Image ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç–∏–Ω–æ–∫\n‚úçÔ∏è Text ‚Äî —Ä–∞–±–æ—Ç–∞ —Å —Ç–µ–∫—Å—Ç–æ–º\nüé¨ Video ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–µ–æ\nüîÄ Mix ‚Äî —á–∞—Ç —Å –ø–∞–º—è—Ç—å—é' },
                    { title: '–ü–æ–ª–µ –≤–≤–æ–¥–∞', text: '–ü–∏—à–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ. Enter ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å, Shift+Enter ‚Äî –Ω–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞.' }
                ]
            },
            en: {
                auto: 'Auto',
                skip: 'Skip',
                next: 'Next',
                start: 'Start',
                welcomeTitle1: 'What do you want to',
                welcomeTitle2: ' create?',
                welcomeSubtitle: 'Choose a mode and describe your idea',
                image: 'Image',
                text: 'Text',
                video: 'Video',
                mix: 'Mix',
                bestModel: 'Best model for the task',
                addApi: 'Add Custom API',
                addApiDesc: 'Connect your own model',
                suggestion1: 'üé® Draw a space landscape',
                suggestion2: '‚úçÔ∏è Write a poem',
                suggestion3: 'üé¨ Create an animation',
                inputPlaceholder: 'Describe what you want to create...',
                imagePlaceholder: 'Describe the image...',
                textPlaceholder: 'What should I write?',
                videoPlaceholder: 'Describe the video...',
                mixPlaceholder: 'Ask anything (I remember context)...',
                disclaimer: 'AI can make mistakes. Please verify important information.',
                addApiTitle: 'Add Custom API',
                apiName: 'Model Name',
                apiEndpoint: 'API Endpoint',
                apiKey: 'API Key',
                apiType: 'Type',
                cancel: 'Cancel',
                save: 'Save',
                generating: 'Generating...',
                you: 'You',
                onboarding: [
                    { title: 'Welcome!', text: 'This is NeuroHub ‚Äî a platform for AI. Let me show you the main features.' },
                    { title: 'Model Selection', text: 'Choose a neural network here. "Auto" picks automatically. You can add your own API.' },
                    { title: 'Work Modes', text: 'üñºÔ∏è Image ‚Äî generate pictures\n‚úçÔ∏è Text ‚Äî work with text\nüé¨ Video ‚Äî create videos\nüîÄ Mix ‚Äî chat with memory' },
                    { title: 'Input Field', text: 'Type your request and send. Enter ‚Äî send, Shift+Enter ‚Äî new line.' }
                ]
            },
            de: {
                auto: 'Auto',
                skip: '√úberspringen',
                next: 'Weiter',
                start: 'Starten',
                welcomeTitle1: 'Was m√∂chten Sie',
                welcomeTitle2: ' erstellen?',
                welcomeSubtitle: 'W√§hlen Sie einen Modus und beschreiben Sie Ihre Idee',
                image: 'Bild',
                text: 'Text',
                video: 'Video',
                mix: 'Mix',
                bestModel: 'Bestes Modell f√ºr die Aufgabe',
                addApi: 'API hinzuf√ºgen',
                addApiDesc: 'Eigenes Modell verbinden',
                suggestion1: 'üé® Zeichne eine Weltraumlandschaft',
                suggestion2: '‚úçÔ∏è Schreibe ein Gedicht',
                suggestion3: 'üé¨ Erstelle eine Animation',
                inputPlaceholder: 'Beschreiben Sie, was Sie erstellen m√∂chten...',
                imagePlaceholder: 'Beschreiben Sie das Bild...',
                textPlaceholder: 'Was soll ich schreiben?',
                videoPlaceholder: 'Beschreiben Sie das Video...',
                mixPlaceholder: 'Fragen Sie alles (ich erinnere mich)...',
                disclaimer: 'KI kann Fehler machen. √úberpr√ºfen Sie wichtige Informationen.',
                addApiTitle: 'API hinzuf√ºgen',
                apiName: 'Modellname',
                apiEndpoint: 'API Endpoint',
                apiKey: 'API Schl√ºssel',
                apiType: 'Typ',
                cancel: 'Abbrechen',
                save: 'Speichern',
                generating: 'Generiere...',
                you: 'Sie',
                onboarding: [
                    { title: 'Willkommen!', text: 'Dies ist NeuroHub ‚Äî eine KI-Plattform.' },
                    { title: 'Modellauswahl', text: 'W√§hlen Sie hier ein Modell. Sie k√∂nnen auch eigene API hinzuf√ºgen.' },
                    { title: 'Arbeitsmodi', text: 'üñºÔ∏è Bild ‚Äî Bilder generieren\n‚úçÔ∏è Text ‚Äî mit Text arbeiten\nüé¨ Video ‚Äî Videos erstellen\nüîÄ Mix ‚Äî Chat mit Ged√§chtnis' },
                    { title: 'Eingabefeld', text: 'Schreiben Sie Ihre Anfrage. Enter ‚Äî senden, Shift+Enter ‚Äî neue Zeile.' }
                ]
            },
            es: {
                auto: 'Auto',
                skip: 'Omitir',
                next: 'Siguiente',
                start: 'Comenzar',
                welcomeTitle1: '¬øQu√© quieres',
                welcomeTitle2: ' crear?',
                welcomeSubtitle: 'Elige un modo y describe tu idea',
                image: 'Imagen',
                text: 'Texto',
                video: 'Video',
                mix: 'Mix',
                bestModel: 'Mejor modelo para la tarea',
                addApi: 'A√±adir API',
                addApiDesc: 'Conectar tu propio modelo',
                suggestion1: 'üé® Dibuja un paisaje espacial',
                suggestion2: '‚úçÔ∏è Escribe un poema',
                suggestion3: 'üé¨ Crea una animaci√≥n',
                inputPlaceholder: 'Describe lo que quieres crear...',
                imagePlaceholder: 'Describe la imagen...',
                textPlaceholder: '¬øQu√© debo escribir?',
                videoPlaceholder: 'Describe el video...',
                mixPlaceholder: 'Pregunta lo que quieras (recuerdo)...',
                disclaimer: 'La IA puede cometer errores. Verifica la informaci√≥n importante.',
                addApiTitle: 'A√±adir API',
                apiName: 'Nombre del modelo',
                apiEndpoint: 'API Endpoint',
                apiKey: 'Clave API',
                apiType: 'Tipo',
                cancel: 'Cancelar',
                save: 'Guardar',
                generating: 'Generando...',
                you: 'T√∫',
                onboarding: [
                    { title: '¬°Bienvenido!', text: 'Esto es NeuroHub ‚Äî una plataforma de IA.' },
                    { title: 'Selecci√≥n de modelo', text: 'Elige un modelo aqu√≠. Puedes a√±adir tu propia API.' },
                    { title: 'Modos de trabajo', text: 'üñºÔ∏è Imagen ‚Äî generar im√°genes\n‚úçÔ∏è Texto ‚Äî trabajar con texto\nüé¨ Video ‚Äî crear videos\nüîÄ Mix ‚Äî chat con memoria' },
                    { title: 'Campo de entrada', text: 'Escribe tu solicitud. Enter ‚Äî enviar, Shift+Enter ‚Äî nueva l√≠nea.' }
                ]
            },
            zh: {
                auto: 'Ëá™Âä®',
                skip: 'Ë∑≥Ëøá',
                next: '‰∏ã‰∏ÄÊ≠•',
                start: 'ÂºÄÂßã',
                welcomeTitle1: '‰Ω†ÊÉ≥',
                welcomeTitle2: 'Âàõ‰Ωú‰ªÄ‰πàÔºü',
                welcomeSubtitle: 'ÈÄâÊã©Ê®°ÂºèÂπ∂ÊèèËø∞‰Ω†ÁöÑÊÉ≥Ê≥ï',
                image: 'ÂõæÂÉè',
                text: 'ÊñáÊú¨',
                video: 'ËßÜÈ¢ë',
                mix: 'Ê∑∑Âêà',
                bestModel: '‰ªªÂä°ÁöÑÊúÄ‰Ω≥Ê®°Âûã',
                addApi: 'Ê∑ªÂä†API',
                addApiDesc: 'ËøûÊé•Ëá™Â∑±ÁöÑÊ®°Âûã',
                suggestion1: 'üé® Áîª‰∏ÄÂπÖÂ§™Á©∫È£éÊôØ',
                suggestion2: '‚úçÔ∏è ÂÜô‰∏ÄÈ¶ñËØó',
                suggestion3: 'üé¨ ÂàõÂª∫Âä®Áîª',
                inputPlaceholder: 'ÊèèËø∞‰Ω†ÊÉ≥Âàõ‰ΩúÁöÑÂÜÖÂÆπ...',
                imagePlaceholder: 'ÊèèËø∞ÂõæÂÉè...',
                textPlaceholder: 'ÊàëÂ∫îËØ•ÂÜô‰ªÄ‰πàÔºü',
                videoPlaceholder: 'ÊèèËø∞ËßÜÈ¢ë...',
                mixPlaceholder: 'ÈóÆ‰ªª‰ΩïÈóÆÈ¢òÔºàÊàëËÆ∞ÂæóÔºâ...',
                disclaimer: 'AIÂèØËÉΩ‰ºöÂá∫Èîô„ÄÇËØ∑È™åËØÅÈáçË¶Å‰ø°ÊÅØ„ÄÇ',
                addApiTitle: 'Ê∑ªÂä†API',
                apiName: 'Ê®°ÂûãÂêçÁß∞',
                apiEndpoint: 'APIÂú∞ÂùÄ',
                apiKey: 'APIÂØÜÈí•',
                apiType: 'Á±ªÂûã',
                cancel: 'ÂèñÊ∂à',
                save: '‰øùÂ≠ò',
                generating: 'ÁîüÊàê‰∏≠...',
                you: '‰Ω†',
                onboarding: [
                    { title: 'Ê¨¢ËøéÔºÅ', text: 'ËøôÊòØNeuroHub‚Äî‚ÄîAIÂπ≥Âè∞„ÄÇ' },
                    { title: 'Ê®°ÂûãÈÄâÊã©', text: 'Âú®ËøôÈáåÈÄâÊã©Ê®°Âûã„ÄÇÂèØ‰ª•Ê∑ªÂä†Ëá™Â∑±ÁöÑAPI„ÄÇ' },
                    { title: 'Â∑•‰ΩúÊ®°Âºè', text: 'üñºÔ∏è ÂõæÂÉè‚Äî‚ÄîÁîüÊàêÂõæÁâá\n‚úçÔ∏è ÊñáÊú¨‚Äî‚ÄîÂ§ÑÁêÜÊñáÂ≠ó\nüé¨ ËßÜÈ¢ë‚Äî‚ÄîÂàõÂª∫ËßÜÈ¢ë\nüîÄ Ê∑∑Âêà‚Äî‚ÄîÂ∏¶ËÆ∞ÂøÜÁöÑËÅäÂ§©' },
                    { title: 'ËæìÂÖ•Ê°Ü', text: 'ËæìÂÖ•ËØ∑Ê±Ç„ÄÇEnter‚Äî‚ÄîÂèëÈÄÅÔºåShift+Enter‚Äî‚ÄîÊç¢Ë°å„ÄÇ' }
                ]
            },
            ja: {
                auto: 'Ëá™Âãï',
                skip: '„Çπ„Ç≠„ÉÉ„Éó',
                next: 'Ê¨°„Å∏',
                start: 'ÈñãÂßã',
                welcomeTitle1: '‰Ωï„Çí',
                welcomeTitle2: '‰Ωú„Çä„Åü„ÅÑ„Åß„Åô„ÅãÔºü',
                welcomeSubtitle: '„É¢„Éº„Éâ„ÇíÈÅ∏Êäû„Åó„Å¶„Ç¢„Ç§„Éá„Ç¢„ÇíË™¨Êòé',
                image: 'ÁîªÂÉè',
                text: '„ÉÜ„Ç≠„Çπ„Éà',
                video: 'ÂãïÁîª',
                mix: '„Éü„ÉÉ„ÇØ„Çπ',
                bestModel: '„Çø„Çπ„ÇØ„Å´ÊúÄÈÅ©„Å™„É¢„Éá„É´',
                addApi: 'API„ÇíËøΩÂä†',
                addApiDesc: 'Áã¨Ëá™„ÅÆ„É¢„Éá„É´„ÇíÊé•Á∂ö',
                suggestion1: 'üé® ÂÆáÂÆô„ÅÆÈ¢®ÊôØ„ÇíÊèè„ÅÑ„Å¶',
                suggestion2: '‚úçÔ∏è Ë©©„ÇíÊõ∏„ÅÑ„Å¶',
                suggestion3: 'üé¨ „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„Çí‰ΩúÊàê',
                inputPlaceholder: '‰Ωú„Çä„Åü„ÅÑ„ÇÇ„ÅÆ„ÇíË™¨Êòé...',
                imagePlaceholder: 'ÁîªÂÉè„ÇíË™¨Êòé...',
                textPlaceholder: '‰Ωï„ÇíÊõ∏„Åë„Å∞„ÅÑ„ÅÑÔºü',
                videoPlaceholder: 'ÂãïÁîª„ÇíË™¨Êòé...',
                mixPlaceholder: '‰Ωï„Åß„ÇÇËÅû„ÅÑ„Å¶ÔºàË¶ö„Åà„Å¶„Åæ„ÅôÔºâ...',
                disclaimer: 'AI„ÅØÈñìÈÅï„ÅÑ„ÇíÁäØ„ÅôÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÈáçË¶Å„Å™ÊÉÖÂ†±„ÅØÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                addApiTitle: 'API„ÇíËøΩÂä†',
                apiName: '„É¢„Éá„É´Âêç',
                apiEndpoint: 'API„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà',
                apiKey: 'API„Ç≠„Éº',
                apiType: '„Çø„Ç§„Éó',
                cancel: '„Ç≠„É£„É≥„Çª„É´',
                save: '‰øùÂ≠ò',
                generating: 'ÁîüÊàê‰∏≠...',
                you: '„ÅÇ„Å™„Åü',
                onboarding: [
                    { title: '„Çà„ÅÜ„Åì„ÅùÔºÅ', text: '„Åì„Çå„ÅØNeuroHub‚Äî‚ÄîAI„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†„Åß„Åô„ÄÇ' },
                    { title: '„É¢„Éá„É´ÈÅ∏Êäû', text: '„Åì„Åì„Åß„É¢„Éá„É´„ÇíÈÅ∏Êäû„ÄÇËá™ÂàÜ„ÅÆAPI„ÇÇËøΩÂä†„Åß„Åç„Åæ„Åô„ÄÇ' },
                    { title: '‰ΩúÊ•≠„É¢„Éº„Éâ', text: 'üñºÔ∏è ÁîªÂÉè‚Äî‚ÄîÁîªÂÉè„ÇíÁîüÊàê\n‚úçÔ∏è „ÉÜ„Ç≠„Çπ„Éà‚Äî‚Äî„ÉÜ„Ç≠„Çπ„ÉàÂá¶ÁêÜ\nüé¨ ÂãïÁîª‚Äî‚ÄîÂãïÁîª‰ΩúÊàê\nüîÄ „Éü„ÉÉ„ÇØ„Çπ‚Äî‚ÄîË®òÊÜ∂‰ªò„Åç„ÉÅ„É£„ÉÉ„Éà' },
                    { title: 'ÂÖ•Âäõ„Éï„Ç£„Éº„É´„Éâ', text: '„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂÖ•Âäõ„ÄÇEnter‚Äî‚ÄîÈÄÅ‰ø°„ÄÅShift+Enter‚Äî‚ÄîÊîπË°å„ÄÇ' }
                ]
            }
        };

        const langFlags = { ru: 'üá∑üá∫', en: 'üá∫üá∏', de: 'üá©üá™', es: 'üá™üá∏', zh: 'üá®üá≥', ja: 'üáØüáµ' };
        let currentLang = localStorage.getItem('neurohub_lang') || 'en';
        
        function t(key) {
            return translations[currentLang]?.[key] || translations['en'][key] || key;
        }

        function setLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('neurohub_lang', lang);
            document.getElementById('current-lang-flag').textContent = langFlags[lang];
            
            document.querySelectorAll('.lang-item').forEach(item => {
                item.classList.toggle('selected', item.dataset.lang === lang);
            });
            
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.dataset.i18n;
                if (translations[lang]?.[key]) {
                    el.textContent = translations[lang][key];
                }
            });
            
            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.dataset.i18nPlaceholder;
                if (translations[lang]?.[key]) {
                    el.placeholder = translations[lang][key];
                }
            });
            
            updateInputPlaceholder();
        }

        // ==========================================
        // –ú–û–î–ï–õ–ò
        // ==========================================
        let customApis = JSON.parse(localStorage.getItem('neurohub_custom_apis') || '[]');
        let selectedModel = 'auto';
        let selectedModelData = null;

        function saveCustomApis() {
            localStorage.setItem('neurohub_custom_apis', JSON.stringify(customApis));
        }

        function renderBuiltinModels() {
            const container = document.getElementById('builtin-models-list');
            container.innerHTML = '';
            
            builtinModels.filter(m => m.enabled).forEach(model => {
                const div = document.createElement('div');
                div.className = 'model-item';
                div.dataset.model = model.id;
                div.innerHTML = `
                    <div class="model-item-icon">
                        <span class="text-lg">${model.icon}</span>
                    </div>
                    <div class="model-item-info">
                        <div class="model-item-name">${model.name}</div>
                        <div class="model-item-desc">${model.description}</div>
                    </div>
                `;
                
                div.addEventListener('click', () => {
                    document.querySelectorAll('.model-item').forEach(i => i.classList.remove('selected'));
                    div.classList.add('selected');
                    selectedModel = model.id;
                    selectedModelData = model;
                    document.getElementById('selected-model-name').textContent = model.name;
                    closeDropdowns();
                });
                
                container.appendChild(div);
            });
        }

        function renderCustomModels() {
            const container = document.getElementById('custom-models-list');
            container.innerHTML = '';
            
            customApis.forEach((api, index) => {
                const div = document.createElement('div');
                div.className = 'model-item custom-model-item';
                div.dataset.model = `custom_${index}`;
                div.innerHTML = `
                    <div class="model-item-icon">
                        <span class="text-lg">üîå</span>
                    </div>
                    <div class="model-item-info">
                        <div class="model-item-name">${api.name}</div>
                        <div class="model-item-desc">${api.type} ‚Ä¢ Custom</div>
                    </div>
                    <button class="delete-api-btn p-1 hover:bg-red-500/20 rounded text-slate-500 hover:text-red-400" data-index="${index}">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                    </button>
                `;
                
                div.addEventListener('click', (e) => {
                    if (e.target.closest('.delete-api-btn')) {
                        e.stopPropagation();
                        customApis.splice(index, 1);
                        saveCustomApis();
                        renderCustomModels();
                        if (selectedModel === `custom_${index}`) {
                            selectedModel = 'auto';
                            selectedModelData = null;
                            document.getElementById('selected-model-name').textContent = t('auto');
                        }
                        return;
                    }
                    
                    document.querySelectorAll('.model-item').forEach(i => i.classList.remove('selected'));
                    div.classList.add('selected');
                    selectedModel = `custom_${index}`;
                    selectedModelData = { ...api, isCustom: true, customIndex: index };
                    document.getElementById('selected-model-name').textContent = api.name;
                    closeDropdowns();
                });
                
                container.appendChild(div);
            });
        }

        function closeDropdowns() {
            modelDropdownMenu.classList.remove('open');
            modelDropdownBtn.classList.remove('active');
            dropdownArrow.style.transform = 'rotate(0deg)';
            langDropdownMenu.classList.remove('open');
            langDropdownArrow.style.transform = 'rotate(0deg)';
        }

        // ==========================================
        // –ß–ê–¢
        // ==========================================
        let chatHistory = [];
        let isGenerating = false;

        function addMessage(role, content) {
            const chatMessages = document.getElementById('chat-messages');
            const welcomeScreen = document.getElementById('welcome-screen');
            
            if (chatHistory.length === 0) {
                welcomeScreen.classList.add('hidden');
                chatMessages.classList.remove('hidden');
            }
            
            chatHistory.push({ role, content, time: new Date() });
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `message message-${role}`;
            
            const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            const modelName = selectedModelData?.name || (selectedModel === 'auto' ? 'Auto' : 'AI');
            
            messageDiv.innerHTML = `
                <div class="message-avatar">
                    ${role === 'user' ? 
                        '<svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>' : 
                        '<svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>'
                    }
                </div>
                <div class="message-content">
                    <div class="message-text">${content}</div>
                    <div class="message-meta">${role === 'user' ? t('you') : modelName} ‚Ä¢ ${time}</div>
                </div>
            `;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            return messageDiv;
        }

        function showLoading() {
            const chatMessages = document.getElementById('chat-messages');
            
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'message message-ai';
            loadingDiv.id = 'loading-message';
            
            loadingDiv.innerHTML = `
                <div class="message-avatar">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                    </svg>
                </div>
                <div class="loading-indicator">
                    <div class="loading-dots">
                        <div class="loading-dot"></div>
                        <div class="loading-dot"></div>
                        <div class="loading-dot"></div>
                        <span class="text-sm text-slate-400 ml-2">${t('generating')}</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                </div>
            `;
            
            chatMessages.appendChild(loadingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideLoading() {
            const loadingDiv = document.getElementById('loading-message');
            if (loadingDiv) loadingDiv.remove();
        }

        async function sendMessage(prompt) {
            if (isGenerating || !prompt.trim()) return;
            
            isGenerating = true;
            const sendBtn = document.getElementById('send-btn');
            const mainInput = document.getElementById('main-input');
            sendBtn.disabled = true;
            mainInput.value = '';
            mainInput.style.height = 'auto';
            
            addMessage('user', prompt);
            showLoading();
            
            try {
                let response;
                
                if (selectedModel === 'auto' || !selectedModelData) {
                    // –î–µ–º–æ-–æ—Ç–≤–µ—Ç
                    await new Promise(r => setTimeout(r, 1500));
                    response = `Demo response for: "${prompt}"\n\nTo get real AI responses, add your API in the model selector.`;
                } else {
                    // –†–µ–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ API
                    const apiConfig = selectedModelData.isCustom 
                        ? customApis[selectedModelData.customIndex]
                        : selectedModelData;
                    
                    const messages = chatHistory
                        .filter(m => m.role === 'user' || m.role === 'ai')
                        .map(m => ({
                            role: m.role === 'user' ? 'user' : 'assistant',
                            content: m.content
                        }));
                    
                    const res = await fetch(apiConfig.endpoint, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${apiConfig.apiKey || apiConfig.key}`
                        },
                        body: JSON.stringify({
                            model: apiConfig.model || 'default',
                            messages: messages
                        })
                    });
                    
                    const data = await res.json();
                    response = data.choices?.[0]?.message?.content 
                        || data.message 
                        || data.response 
                        || data.error?.message
                        || JSON.stringify(data);
                }
                
                hideLoading();
                addMessage('ai', response);
                
            } catch (error) {
                hideLoading();
                addMessage('ai', `Error: ${error.message}\n\nCheck your API settings.`);
            }
            
            isGenerating = false;
            sendBtn.disabled = true;
        }

        // ==========================================
        // –û–ù–ë–û–†–î–ò–ù–ì
        // ==========================================
        const onboardingTargets = [
            { target: '#logo', position: 'bottom' },
            { target: '#neuro-selector', position: 'bottom' },
            { target: '#mode-switcher', position: 'top' },
            { target: '#main-input', position: 'top' }
        ];

        let currentStep = 0;
        const overlay = document.getElementById('onboarding-overlay');
        const backdrop = document.getElementById('onboarding-backdrop');
        const tooltip = document.getElementById('tooltip');
        const tooltipArrow = document.getElementById('tooltip-arrow');
        const tooltipTitle = document.getElementById('tooltip-title');
        const tooltipText = document.getElementById('tooltip-text');
        const stepNumber = document.getElementById('step-number');
        const dotsContainer = document.getElementById('dots-container');
        const nextBtn = document.getElementById('next-btn');
        const skipBtn = document.getElementById('skip-btn');
        const pulseIndicator = document.getElementById('pulse-indicator');

        function checkFirstVisit() {
            const visited = localStorage.getItem('neurohub_visited_v6');
            if (!visited) {
                setTimeout(() => startOnboarding(), 800);
            }
        }

        function startOnboarding() {
            currentStep = 0;
            overlay.classList.remove('hidden');
            backdrop.classList.remove('hidden');
            showStep(currentStep);
        }

        function showStep(index) {
            const stepData = onboardingTargets[index];
            const langData = translations[currentLang].onboarding[index];
            const target = document.querySelector(stepData.target);
            
            if (!target) return;

            document.querySelectorAll('.highlight-element').forEach(el => el.classList.remove('highlight-element'));
            target.classList.add('highlight-element');

            tooltipTitle.textContent = langData.title;
            tooltipText.textContent = langData.text;
            tooltipText.style.whiteSpace = 'pre-line';
            stepNumber.textContent = index + 1;

            positionTooltip(target, stepData.position);
            updateDots();

            nextBtn.textContent = index === onboardingTargets.length - 1 ? t('start') : t('next');
        }

        function positionTooltip(target, position) {
            const rect = target.getBoundingClientRect();
            const tooltipWidth = Math.min(350, window.innerWidth - 40);
            tooltip.style.width = tooltipWidth + 'px';
            
            const tooltipRect = tooltip.getBoundingClientRect();
            
            let top, left;
            const offset = 16;

            if (position === 'bottom') {
                top = rect.bottom + offset;
                left = rect.left + (rect.width / 2) - (tooltipWidth / 2);
                tooltipArrow.style.top = '-8px';
                tooltipArrow.style.left = '50%';
                tooltipArrow.style.transform = 'translateX(-50%) rotate(45deg)';
                tooltipArrow.style.bottom = 'auto';
            } else {
                top = rect.top - tooltipRect.height - offset;
                left = rect.left + (rect.width / 2) - (tooltipWidth / 2);
                tooltipArrow.style.bottom = '-8px';
                tooltipArrow.style.left = '50%';
                tooltipArrow.style.transform = 'translateX(-50%) rotate(45deg)';
                tooltipArrow.style.top = 'auto';
            }

            left = Math.max(20, Math.min(left, window.innerWidth - tooltipWidth - 20));
            top = Math.max(20, Math.min(top, window.innerHeight - tooltipRect.height - 20));

            tooltip.style.top = `${top}px`;
            tooltip.style.left = `${left}px`;

            pulseIndicator.style.top = `${rect.top + rect.height / 2 - 24}px`;
            pulseIndicator.style.left = `${rect.left + rect.width / 2 - 24}px`;
            pulseIndicator.classList.remove('hidden');
        }

        function updateDots() {
            dotsContainer.innerHTML = '';
            onboardingTargets.forEach((_, i) => {
                const dot = document.createElement('span');
                dot.className = `w-2 h-2 rounded-full inline-block mx-0.5 ${i === currentStep ? 'bg-purple-500' : 'bg-purple-500/30'}`;
                dotsContainer.appendChild(dot);
            });
        }

        nextBtn.addEventListener('click', () => {
            if (currentStep < onboardingTargets.length - 1) {
                currentStep++;
                showStep(currentStep);
            } else {
                endOnboarding();
            }
        });

        skipBtn.addEventListener('click', endOnboarding);

        function endOnboarding() {
            overlay.classList.add('hidden');
            backdrop.classList.add('hidden');
            document.querySelectorAll('.highlight-element').forEach(el => el.classList.remove('highlight-element'));
            pulseIndicator.classList.add('hidden');
            localStorage.setItem('neurohub_visited_v6', 'true');
        }

        document.getElementById('help-btn').addEventListener('click', startOnboarding);

        // ==========================================
        // DROPDOWN
        // ==========================================
        const modelDropdownBtn = document.getElementById('model-dropdown-btn');
        const modelDropdownMenu = document.getElementById('model-dropdown-menu');
        const dropdownArrow = document.getElementById('dropdown-arrow');
        const langDropdownBtn = document.getElementById('lang-dropdown-btn');
        const langDropdownMenu = document.getElementById('lang-dropdown-menu');
        const langDropdownArrow = document.getElementById('lang-dropdown-arrow');

        modelDropdownBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            const isOpen = modelDropdownMenu.classList.contains('open');
            langDropdownMenu.classList.remove('open');
            langDropdownArrow.style.transform = 'rotate(0deg)';
            
            if (isOpen) {
                modelDropdownMenu.classList.remove('open');
                modelDropdownBtn.classList.remove('active');
                dropdownArrow.style.transform = 'rotate(0deg)';
            } else {
                modelDropdownMenu.classList.add('open');
                modelDropdownBtn.classList.add('active');
                dropdownArrow.style.transform = 'rotate(180deg)';
            }
        });

        langDropdownBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            const isOpen = langDropdownMenu.classList.contains('open');
            modelDropdownMenu.classList.remove('open');
            modelDropdownBtn.classList.remove('active');
            dropdownArrow.style.transform = 'rotate(0deg)';
            
            if (isOpen) {
                langDropdownMenu.classList.remove('open');
                langDropdownArrow.style.transform = 'rotate(0deg)';
            } else {
                langDropdownMenu.classList.add('open');
                langDropdownArrow.style.transform = 'rotate(180deg)';
            }
        });

        document.addEventListener('click', closeDropdowns);

        document.querySelector('.model-item[data-model="auto"]').addEventListener('click', () => {
            document.querySelectorAll('.model-item').forEach(i => i.classList.remove('selected'));
            document.querySelector('.model-item[data-model="auto"]').classList.add('selected');
            selectedModel = 'auto';
            selectedModelData = null;
            document.getElementById('selected-model-name').textContent = t('auto');
            closeDropdowns();
        });

        document.querySelectorAll('.lang-item').forEach(item => {
            item.addEventListener('click', () => {
                setLanguage(item.dataset.lang);
                langDropdownMenu.classList.remove('open');
                langDropdownArrow.style.transform = 'rotate(0deg)';
                typeText();
            });
        });

        // ==========================================
        // –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û API
        // ==========================================
        const apiModal = document.getElementById('api-modal');
        
        document.getElementById('add-api-btn').addEventListener('click', () => {
            closeDropdowns();
            apiModal.classList.remove('hidden');
        });

        document.getElementById('close-modal').addEventListener('click', closeModal);
        document.getElementById('cancel-api').addEventListener('click', closeModal);

        function closeModal() {
            apiModal.classList.add('hidden');
            document.getElementById('api-name').value = '';
            document.getElementById('api-endpoint').value = '';
            document.getElementById('api-key').value = '';
            document.getElementById('api-model').value = '';
        }

        document.getElementById('save-api').addEventListener('click', () => {
            const name = document.getElementById('api-name').value.trim();
            const endpoint = document.getElementById('api-endpoint').value.trim();
            const key = document.getElementById('api-key').value.trim();
            const model = document.getElementById('api-model').value.trim();
            const type = document.getElementById('api-type').value;
            
            if (!name || !endpoint) {
                alert('Please fill in the name and endpoint');
                return;
            }
            
            customApis.push({ name, endpoint, key, model, type });
            saveCustomApis();
            renderCustomModels();
            closeModal();
        });

        // ==========================================
        // –†–ï–ñ–ò–ú–´
        // ==========================================
        let currentMode = 'image';

        function updateInputPlaceholder() {
            const input = document.getElementById('main-input');
            const placeholders = {
                image: t('imagePlaceholder'),
                text: t('textPlaceholder'),
                video: t('videoPlaceholder'),
                mix: t('mixPlaceholder')
            };
            input.placeholder = placeholders[currentMode] || t('inputPlaceholder');
        }

        document.querySelectorAll('.mode-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentMode = btn.dataset.mode;
                updateInputPlaceholder();
            });
        });

        // ==========================================
        // –í–í–û–î
        // ==========================================
        const mainInput = document.getElementById('main-input');
        const sendBtn = document.getElementById('send-btn');

        mainInput.addEventListener('input', () => {
            mainInput.style.height = 'auto';
            mainInput.style.height = Math.min(mainInput.scrollHeight, 100) + 'px';
            sendBtn.disabled = mainInput.value.trim() === '' || isGenerating;
        });

        mainInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                if (!sendBtn.disabled) {
                    sendMessage(mainInput.value);
                }
            }
        });

        sendBtn.addEventListener('click', () => {
            if (!sendBtn.disabled) {
                sendMessage(mainInput.value);
            }
        });

        document.querySelectorAll('.suggestion-chip').forEach(chip => {
            chip.addEventListener('click', () => {
                const text = chip.textContent.trim();
                mainInput.value = text.substring(text.indexOf(' ') + 1);
                mainInput.dispatchEvent(new Event('input'));
                mainInput.focus();
            });
        });

        // ==========================================
        // –ß–ê–°–¢–ò–¶–´ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ)
        // ==========================================
        function createParticles() {
            const container = document.getElementById('particles');
            const particleCount = window.innerWidth < 640 ? 15 : 25;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                const size = 2 + Math.random() * 4;
                const duration = 20 + Math.random() * 15;
                const delay = Math.random() * duration;
                
                particle.style.left = Math.random() * 100 + '%';
                particle.style.bottom = '-20px';
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particle.style.animationDuration = duration + 's';
                particle.style.animationDelay = delay + 's';
                
                container.appendChild(particle);
            }
        }

        // ==========================================
        // –ü–ï–ß–ê–¢–ê–ù–ò–ï
        // ==========================================
        function typeText() {
            const text1 = translations[currentLang].welcomeTitle1;
            const text2 = translations[currentLang].welcomeTitle2;
            const fullText = text1 + text2;
            const typingElement = document.getElementById('typing-text');
            let index = 0;
            
            typingElement.innerHTML = '';
            
            function type() {
                if (index < fullText.length) {
                    const currentText = fullText.substring(0, index + 1);
                    const splitPoint = text1.length;
                    
                    if (index < splitPoint) {
                        typingElement.innerHTML = `<span class="text-slate-100">${currentText}</span>`;
                    } else {
                        typingElement.innerHTML = `<span class="text-slate-100">${text1}</span><span class="animated-gradient">${currentText.substring(splitPoint)}</span>`;
                    }
                    
                    index++;
                    setTimeout(type, 80);
                }
            }
            
            type();
        }

        // ==========================================
        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
        // ==========================================
        createParticles();
        setLanguage(currentLang);
        renderBuiltinModels();
        renderCustomModels();
        setTimeout(typeText, 500);
        checkFirstVisit();
    </script>
</body>
</html>
</html>
